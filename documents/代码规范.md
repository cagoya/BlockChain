# 代码规范

## 通用规则

- 使用`utf-8(无BOM)`编码
- 缩进是四个空格
- 结尾是 LF（这个没关系，git会自动处理）

对于 Go 可以使用`go fmt ./`命令来格式化代码。

## Go

### 命名规范

#### 通用规则

Go 大小写开头决定了可见性：

- 大写字母开头：如 Group1，表示可被外部包访问，相当于 public。
- 小写字母开头：仅在包内可见，相当于 private。

不允许使用奇怪的英文缩写或中文拼音来命名，常见的缩写，如 api、vip这种是允许的。

#### 包名

- 必须与目录名一致。
- 使用全小写，简短且有意义。
- 避免与标准库冲突。

示例：

```go
package model
package service
```

#### 变量和结构体

驼峰命名法，本身驼峰是有两种的，分别称作大驼峰/帕斯卡命名法(PascalCase)和小驼峰(camelCase)，但是如上文所说 Go 中的首字母是否大写是由可见性决定的，所以此处没必要区分。

示例：

```go
var name string
var isExist bool

type User struct {
    Username string
    Email    string
}
```

#### 接口

- 单函数接口建议以 er 结尾，如 Reader, Writer。
- 多函数接口使用功能描述清晰的名称。

示例：

```go
type Reader interface {
    Read(p []byte) (n int, err error)
}
```

#### 常量和枚举

- 全部使用大写字母，下划线分隔。
- 枚举类型需先定义类型。

示例：

```go
const MAX_COUNT int = 100

type Scheme string
 
const (
    HTTP  Scheme = "http"
    HTTPS Scheme = "https"
)
```

### 注释

- 统一使用中文注释
- 函数、结构体、接口前需有注释
- 关键或复杂逻辑处需有注释

### import

引入包时按以下顺序排列，并用空行分隔不同类型：

- 标准库包
- 项目内部包
- 第三方包

示例：

```go
import (
    "encoding/json"
    "strings"
 
    "myproject/models"
    "myproject/controller"
    "myproject/utils"
 
    "github.com/astaxie/beego"
    "github.com/go-sql-driver/mysql"
)
```

解决依赖关系可以使用`go mod tidy`指令，这个指令会自动删除不需要的包和引用需要的包。

## TS

前端反正大概率是 AI 写大部分，这里就不列举了，参考已有代码就好。

## git 规范

### 分支规则

采用git flow工作流，不允许强制提交，不直接在主分支上开发，避免对主分支造成不可逆影响，一般在`dev`分支上开发，待有一定成果后向`main`分支合并（发起一个merge request）。

```bash
# git clone 是可以直接选中某个分支的
# 比如这里拉取 dev 分支
git clone -b dev git@github.com:cagoya/BlockChain.git

# 创建新的分支并切换直接使用 checkout -b
# 比如这里创建并切换到 dev 分支
git checkout -b  dev
```

### message 规约

遵循 conventional commits，但是简化处理，格式为`type：message`，常用的`type`有以下几种：

1. `add`：添加内容
2. `delete`：移除内容
3. `fix`：修正bug
4. `style`：格式化代码
5. `refactor`：重构代码

示例：

```bash
# 添加了账户管理功能
git commit -m "add：添加账户管理"

# 修复计数异常bug
git commit -m "fix：修复计数异常"
```